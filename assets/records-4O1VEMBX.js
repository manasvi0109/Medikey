import{c as P,p as Oe,r as o,j as e,q as Q,t as ze,S as Ie,f as g,G as W,w as Y,k as J,l as Z,C as B,B as j,o as ee,H as N,I as S,e as Le,X as Ve,n as $e,u as He}from"./index-zgffJ4ce.js";import{D as qe,a as Ue,E as Be,b as Ge,c as O}from"./dropdown-menu-DcbzPCR1.js";import{d as se,T as Ke,O as Xe,W as Qe,C as We,e as Ye,f as Je,g as ae,R as Ze,P as es,D as ss,a as as,b as ts,c as rs,h as ls,i as is}from"./dialog-Bd7EBT8B.js";import{F as os,E as G,D as K,R as ns}from"./RecordViewer-uc4KBbk3.js";import{f as te,P as cs}from"./format-BkFfCggl.js";import{T as ds}from"./textarea-Dcn7_MfS.js";import{S as ms,a as ps,b as xs,c as us,d as w,T as hs,e as gs,f as C,g as R}from"./tabs-Bbr2jWRC.js";import{P as fs,a as js,b as vs,C as ys}from"./popover-B6LVB2xn.js";import{S as h}from"./skeleton-Cjg6cfqo.js";import{S as Ns}from"./search-spqjNmA2.js";import"./index-BoahbgE0.js";import"./index-SjyDGVV-.js";import"./index-BjBm0GxM.js";import"./chevron-right--F6821Ci.js";import"./clock-lpJI9UBH.js";import"./index-BdQq_4o_.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=P("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=P("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=P("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=P("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=P("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var re="AlertDialog",[Cs,ia]=Oe(re,[se]),v=se(),le=s=>{const{__scopeAlertDialog:t,...a}=s,r=v(t);return e.jsx(Ze,{...r,...a,modal:!0})};le.displayName=re;var Rs="AlertDialogTrigger",As=o.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,c=v(a);return e.jsx(Ke,{...c,...r,ref:t})});As.displayName=Rs;var Ss="AlertDialogPortal",ie=s=>{const{__scopeAlertDialog:t,...a}=s,r=v(t);return e.jsx(es,{...r,...a})};ie.displayName=Ss;var Ps="AlertDialogOverlay",oe=o.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,c=v(a);return e.jsx(Xe,{...c,...r,ref:t})});oe.displayName=Ps;var b="AlertDialogContent",[Ms,Fs]=Cs(b),ne=o.forwardRef((s,t)=>{const{__scopeAlertDialog:a,children:r,...c}=s,u=v(a),m=o.useRef(null),y=Q(t,m),i=o.useRef(null);return e.jsx(Qe,{contentName:b,titleName:ce,docsSlug:"alert-dialog",children:e.jsx(Ms,{scope:a,cancelRef:i,children:e.jsxs(We,{role:"alertdialog",...u,...c,ref:y,onOpenAutoFocus:ze(c.onOpenAutoFocus,p=>{var x;p.preventDefault(),(x=i.current)==null||x.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[e.jsx(Ie,{children:r}),e.jsx(Es,{contentRef:m})]})})})});ne.displayName=b;var ce="AlertDialogTitle",de=o.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,c=v(a);return e.jsx(Ye,{...c,...r,ref:t})});de.displayName=ce;var me="AlertDialogDescription",pe=o.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,c=v(a);return e.jsx(Je,{...c,...r,ref:t})});pe.displayName=me;var _s="AlertDialogAction",xe=o.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,c=v(a);return e.jsx(ae,{...c,...r,ref:t})});xe.displayName=_s;var ue="AlertDialogCancel",he=o.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,{cancelRef:c}=Fs(ue,a),u=v(a),m=Q(t,c);return e.jsx(ae,{...u,...r,ref:m})});he.displayName=ue;var Es=({contentRef:s})=>{const t=`\`${b}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${b}\` by passing a \`${me}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${b}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return o.useEffect(()=>{var r;document.getElementById((r=s.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,s]),null},ks=le,Os=ie,ge=oe,fe=ne,je=xe,ve=he,ye=de,Ne=pe;const zs=ks,Is=Os,we=o.forwardRef(({className:s,...t},a)=>e.jsx(ge,{className:g("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:a}));we.displayName=ge.displayName;const De=o.forwardRef(({className:s,...t},a)=>e.jsxs(Is,{children:[e.jsx(we,{}),e.jsx(fe,{ref:a,className:g("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));De.displayName=fe.displayName;const be=({className:s,...t})=>e.jsx("div",{className:g("flex flex-col space-y-2 text-center sm:text-left",s),...t});be.displayName="AlertDialogHeader";const Te=({className:s,...t})=>e.jsx("div",{className:g("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});Te.displayName="AlertDialogFooter";const Ce=o.forwardRef(({className:s,...t},a)=>e.jsx(ye,{ref:a,className:g("text-lg font-semibold",s),...t}));Ce.displayName=ye.displayName;const Re=o.forwardRef(({className:s,...t},a)=>e.jsx(Ne,{ref:a,className:g("text-sm text-muted-foreground",s),...t}));Re.displayName=Ne.displayName;const Ae=o.forwardRef(({className:s,...t},a)=>e.jsx(je,{ref:a,className:g(W(),s),...t}));Ae.displayName=je.displayName;const Se=o.forwardRef(({className:s,...t},a)=>e.jsx(ve,{ref:a,className:g(W({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));Se.displayName=ve.displayName;function Ls({type:s}){const a=(r=>{switch(r){case"prescription":return{bg:"bg-green-100",text:"text-green-800",label:"Prescription"};case"lab_report":return{bg:"bg-primary-100",text:"text-primary-800",label:"Lab Report"};case"diagnostic_image":return{bg:"bg-purple-100",text:"text-purple-800",label:"Diagnostic"};case"summary":return{bg:"bg-blue-100",text:"text-blue-800",label:"Summary"};default:return{bg:"bg-gray-100",text:"text-gray-800",label:r.charAt(0).toUpperCase()+r.slice(1).replace("_"," ")}}})(s);return e.jsx("span",{className:g("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",a.bg,a.text),children:a.label})}function Vs({type:s}){return(a=>{switch(a){case"prescription":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-600",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z",clipRule:"evenodd"})});case"lab_report":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary-600",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})});case"diagnostic_image":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-purple-600",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})});case"summary":return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-600",viewBox:"0 0 20 20",fill:"currentColor",children:[e.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),e.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]});default:return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})}})(s)}function $s(s){if(s===0)return"0 Bytes";const t=1024,a=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,r)).toFixed(2))+" "+a[r]}function A({records:s,onRecordSelect:t}){const[a,r]=o.useState(null),c=Y(),{toast:u}=J(),m=Z({mutationFn:i=>ee("DELETE",`/api/records/${i}`),onSuccess:()=>{c.invalidateQueries({queryKey:["/api/records"]}),u({title:"Record deleted",description:"The medical record has been deleted successfully."}),r(null)},onError:i=>{u({title:"Error",description:`Failed to delete record: ${i.message}`,variant:"destructive"})}}),y=()=>{a&&m.mutate(a.id)};return s.length===0?e.jsx(B,{className:"p-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(os,{className:"h-16 w-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No records found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your search or filters to find what you're looking for."})]})}):e.jsxs("div",{className:"space-y-4",children:[s.map(i=>e.jsx(B,{className:"overflow-hidden",children:e.jsx("div",{className:"px-4 py-4 sm:px-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:g("flex-shrink-0 h-10 w-10 rounded-full flex items-center justify-center",i.recordType==="prescription"?"bg-green-100":i.recordType==="lab_report"?"bg-primary-100":i.recordType==="diagnostic_image"?"bg-purple-100":"bg-blue-100"),children:e.jsx(Vs,{type:i.recordType})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:i.title}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx("span",{children:i.provider}),e.jsx("span",{className:"mx-1",children:"•"}),e.jsx("span",{children:te(new Date(i.recordDate),"MMMM d, yyyy")})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(Ls,{type:i.recordType})})]}),i.description&&e.jsx("p",{className:"mt-2 text-sm text-gray-600 line-clamp-2",children:i.description}),e.jsxs("div",{className:"mt-2 flex items-center text-xs text-gray-500",children:[e.jsx("span",{className:"truncate",children:i.fileName}),e.jsx("span",{className:"mx-1",children:"•"}),e.jsx("span",{children:$s(i.fileSize)}),i.tags&&i.tags.length>0&&e.jsx("div",{className:"ml-4 flex flex-wrap gap-1",children:i.tags.map((p,x)=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs bg-gray-100 text-gray-800",children:p},x))})]})]}),e.jsxs("div",{className:"ml-4 flex-shrink-0 flex space-x-2",children:[e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>t(i),className:"flex items-center",children:[e.jsx(G,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(j,{variant:"outline",size:"sm",className:"flex items-center",children:[e.jsx(K,{className:"h-4 w-4 mr-1"}),"Download"]}),e.jsxs(qe,{children:[e.jsx(Ue,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(Be,{className:"h-4 w-4"})})}),e.jsxs(Ge,{align:"end",children:[e.jsxs(O,{onClick:()=>t(i),children:[e.jsx(G,{className:"h-4 w-4 mr-2"})," View Details"]}),e.jsxs(O,{children:[e.jsx(K,{className:"h-4 w-4 mr-2"})," Download"]}),e.jsxs(O,{children:[e.jsx(bs,{className:"h-4 w-4 mr-2"})," Share Record"]}),e.jsxs(O,{className:"text-red-600",onClick:()=>r(i),children:[e.jsx(Ts,{className:"h-4 w-4 mr-2"})," Delete Record"]})]})]})]})]})})},i.id)),e.jsx(zs,{open:!!a,onOpenChange:i=>!i&&r(null),children:e.jsxs(De,{children:[e.jsxs(be,{children:[e.jsx(Ce,{children:"Delete Medical Record"}),e.jsx(Re,{children:"Are you sure you want to delete this record? This action cannot be undone and the record will be permanently removed from your medical history."})]}),e.jsxs(Te,{children:[e.jsx(Se,{children:"Cancel"}),e.jsx(Ae,{className:"bg-red-600 hover:bg-red-700",onClick:y,disabled:m.isPending,children:m.isPending?"Deleting...":"Delete"})]})]})})]})}function Hs({isOpen:s,onClose:t}){const[a,r]=o.useState(""),[c,u]=o.useState(""),[m,y]=o.useState(""),[i,p]=o.useState(""),[x,M]=o.useState(""),[l,F]=o.useState(new Date),[f,z]=o.useState([]),[_,I]=o.useState(""),[T,L]=o.useState(null),[Pe,$]=o.useState(!1),[H,E]=o.useState(0),q=o.useRef(null),Me=Y(),{toast:V}=J(),k=Z({mutationFn:async n=>{$(!0),E(0);const d=setInterval(()=>{E(D=>D>=90?(clearInterval(d),90):D+10)},500);try{const D=await ee("POST","/api/records",n);return clearInterval(d),E(100),D}catch(D){throw clearInterval(d),D}finally{$(!1)}},onSuccess:()=>{Me.invalidateQueries({queryKey:["/api/records"]}),V({title:"Record uploaded",description:"Your medical record has been uploaded successfully."}),U(),t()},onError:n=>{V({title:"Upload failed",description:`Failed to upload record: ${n.message}`,variant:"destructive"})}}),U=()=>{r(""),u(""),y(""),p(""),M(""),F(new Date),z([]),I(""),L(null),E(0)},Fe=n=>{n.target.files&&n.target.files[0]&&L(n.target.files[0])},_e=n=>{n.key==="Enter"&&_.trim()&&(n.preventDefault(),f.includes(_.trim())||z([...f,_.trim()]),I(""))},Ee=n=>{z(f.filter(d=>d!==n))},ke=n=>{if(n.preventDefault(),!a||!m||!i||!l||!T){V({title:"Missing information",description:"Please fill in all required fields and select a file.",variant:"destructive"});return}const d=new FormData;d.append("title",a),d.append("description",c),d.append("recordType",m),d.append("provider",i),x&&d.append("providerType",x),d.append("recordDate",l.toISOString()),f.length>0&&d.append("tags",JSON.stringify(f)),d.append("file",T),k.mutate(d)};return e.jsx(ss,{open:s,onOpenChange:n=>!n&&t(),children:e.jsxs(as,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(ts,{children:[e.jsx(rs,{children:"Upload Medical Record"}),e.jsx(ls,{children:"Add a new medical record to your health portfolio."})]}),e.jsxs("form",{onSubmit:ke,className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsxs(N,{htmlFor:"title",className:"text-right",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(S,{id:"title",value:a,onChange:n=>r(n.target.value),placeholder:"E.g., Annual Blood Test Results",className:"mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"description",className:"text-right",children:"Description"}),e.jsx(ds,{id:"description",value:c,onChange:n=>u(n.target.value),placeholder:"Add details about this record",className:"mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs(N,{htmlFor:"recordType",className:"text-right",children:["Record Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(ms,{value:m,onValueChange:y,required:!0,children:[e.jsx(ps,{className:"mt-1",children:e.jsx(xs,{placeholder:"Select type"})}),e.jsxs(us,{children:[e.jsx(w,{value:"prescription",children:"Prescription"}),e.jsx(w,{value:"lab_report",children:"Lab Report"}),e.jsx(w,{value:"diagnostic_image",children:"Diagnostic Image"}),e.jsx(w,{value:"summary",children:"Medical Summary"}),e.jsx(w,{value:"vaccination",children:"Vaccination Record"}),e.jsx(w,{value:"insurance",children:"Insurance Document"}),e.jsx(w,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsxs(N,{htmlFor:"recordDate",className:"text-right",children:["Record Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(fs,{children:[e.jsx(js,{asChild:!0,children:e.jsxs(j,{variant:"outline",className:g("w-full mt-1 justify-start text-left font-normal",!l&&"text-muted-foreground"),children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),l?te(l,"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(vs,{className:"w-auto p-0",align:"start",children:e.jsx(ys,{mode:"single",selected:l,onSelect:F,initialFocus:!0})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs(N,{htmlFor:"provider",className:"text-right",children:["Provider Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(S,{id:"provider",value:i,onChange:n=>p(n.target.value),placeholder:"E.g., Dr. Smith, City Hospital",className:"mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"providerType",className:"text-right",children:"Provider Type"}),e.jsx(S,{id:"providerType",value:x,onChange:n=>M(n.target.value),placeholder:"E.g., Hospital, Clinic, Laboratory",className:"mt-1"})]})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"tags",className:"text-right",children:"Tags (Press Enter to add)"}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx(S,{id:"tags",value:_,onChange:n=>I(n.target.value),onKeyDown:_e,placeholder:"E.g., diabetes, cardiology",className:"flex-grow"})}),f.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:f.map((n,d)=>e.jsxs("div",{className:"bg-primary-100 text-primary-800 rounded-full px-3 py-1 text-sm flex items-center",children:[n,e.jsx("button",{type:"button",onClick:()=>Ee(n),className:"ml-2 text-primary-600 hover:text-primary-800",children:e.jsx(Ve,{className:"h-3 w-3"})})]},d))})]}),e.jsxs("div",{children:[e.jsxs(N,{htmlFor:"file",className:"text-right",children:["Upload File ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("input",{ref:q,id:"file",type:"file",onChange:Fe,className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.xls,.xlsx,.csv,.txt",required:!0}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-md p-6 text-center",children:T?e.jsxs("div",{className:"flex items-center justify-center flex-col",children:[e.jsx(ws,{className:"h-8 w-8 text-primary-600 mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:T.name}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:qs(T.size)}),e.jsx(j,{type:"button",variant:"outline",size:"sm",className:"mt-2",onClick:()=>L(null),children:"Remove file"})]}):e.jsxs("div",{className:"flex items-center justify-center flex-col",children:[e.jsx(X,{className:"h-8 w-8 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Drag and drop your file here, or"}),e.jsx(j,{type:"button",variant:"outline",size:"sm",onClick:()=>{var n;return(n=q.current)==null?void 0:n.click()},children:"Browse files"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Supported formats: PDF, JPEG, PNG, DOC, DOCX, XLS, XLSX, CSV, TXT"})]})})]})]}),Pe&&e.jsxs("div",{children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-primary-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${H}%`}})}),e.jsxs("p",{className:"text-xs text-center mt-1 text-gray-500",children:["Uploading... ",H,"%"]})]})]}),e.jsxs(is,{children:[e.jsx(j,{type:"button",variant:"outline",onClick:U,disabled:k.isPending,children:"Reset Form"}),e.jsx(j,{type:"submit",disabled:k.isPending,children:k.isPending?e.jsxs(e.Fragment,{children:[e.jsx($e,{className:"h-4 w-4 animate-spin mr-2"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Upload Record"]})})]})]})]})})}function qs(s){return s<1024?`${s} B`:s<1024*1024?`${(s/1024).toFixed(1)} KB`:`${(s/(1024*1024)).toFixed(1)} MB`}function oa(){const[s,t]=o.useState(!1),[a,r]=o.useState(null),[c,u]=o.useState(""),[m,y]=o.useState("all"),{data:i,isLoading:p}=He({queryKey:["/api/records"]}),x=i?i.filter(l=>{const F=l.title.toLowerCase().includes(c.toLowerCase())||l.description&&l.description.toLowerCase().includes(c.toLowerCase())||l.provider.toLowerCase().includes(c.toLowerCase()),f=m==="all"||l.recordType===m;return F&&f}):[],M=i?Array.from(new Set(i.map(l=>l.recordType))):[];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"py-6 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Medical Records"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"View and manage all your medical documents in one place"})]}),e.jsxs(j,{className:"mt-4 sm:mt-0 flex items-center",onClick:()=>t(!0),children:[e.jsx(cs,{className:"mr-2 h-4 w-4"}),"Upload Record"]})]}),e.jsx("div",{className:"mb-6 bg-white rounded-lg shadow overflow-hidden p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(S,{placeholder:"Search records...",className:"pl-10",value:c,onChange:l=>u(l.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",value:m,onChange:l=>y(l.target.value),children:[e.jsx("option",{value:"all",children:"All Types"}),M.map(l=>e.jsx("option",{value:l,children:l.charAt(0).toUpperCase()+l.slice(1).replace("_"," ")},l))]})]})]})}),e.jsxs(hs,{defaultValue:"all",className:"w-full",children:[e.jsxs(gs,{className:"mb-4",children:[e.jsx(C,{value:"all",children:"All Records"}),e.jsx(C,{value:"prescriptions",children:"Prescriptions"}),e.jsx(C,{value:"lab_reports",children:"Lab Reports"}),e.jsx(C,{value:"diagnostics",children:"Diagnostics"}),e.jsx(C,{value:"summaries",children:"Summaries"})]}),e.jsx(R,{value:"all",className:"w-full",children:p?e.jsxs("div",{className:"space-y-4",children:[e.jsx(h,{className:"h-20 w-full"}),e.jsx(h,{className:"h-20 w-full"}),e.jsx(h,{className:"h-20 w-full"})]}):e.jsx(A,{records:x,onRecordSelect:l=>r(l)})}),e.jsx(R,{value:"prescriptions",children:p?e.jsxs("div",{className:"space-y-4",children:[e.jsx(h,{className:"h-20 w-full"}),e.jsx(h,{className:"h-20 w-full"})]}):e.jsx(A,{records:x.filter(l=>l.recordType==="prescription"),onRecordSelect:l=>r(l)})}),e.jsx(R,{value:"lab_reports",children:p?e.jsxs("div",{className:"space-y-4",children:[e.jsx(h,{className:"h-20 w-full"}),e.jsx(h,{className:"h-20 w-full"})]}):e.jsx(A,{records:x.filter(l=>l.recordType==="lab_report"),onRecordSelect:l=>r(l)})}),e.jsx(R,{value:"diagnostics",children:p?e.jsxs("div",{className:"space-y-4",children:[e.jsx(h,{className:"h-20 w-full"}),e.jsx(h,{className:"h-20 w-full"})]}):e.jsx(A,{records:x.filter(l=>l.recordType==="diagnostic_image"),onRecordSelect:l=>r(l)})}),e.jsx(R,{value:"summaries",children:p?e.jsxs("div",{className:"space-y-4",children:[e.jsx(h,{className:"h-20 w-full"}),e.jsx(h,{className:"h-20 w-full"})]}):e.jsx(A,{records:x.filter(l=>l.recordType==="summary"),onRecordSelect:l=>r(l)})})]})]}),e.jsx(Hs,{isOpen:s,onClose:()=>t(!1)}),a&&e.jsx(ns,{record:a,isOpen:!!a,onClose:()=>r(null)})]})}export{oa as default};
