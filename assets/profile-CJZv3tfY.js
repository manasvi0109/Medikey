import{c as Q,k as q,w as H,r as u,a5 as U,u as K,N as j,l as y,j as e,n as p,C as f,a as v,b as N,d as b,H as t,I as o,B as C,O as i,Q as S,a6 as R,a7 as z}from"./index-B_3hYsFf.js";import{T as F}from"./textarea-C4DiPniO.js";import{T as Y,e as $,f as P,g as E,S as T,a as B,b as w,c as I,d as a}from"./tabs-DPpCUSf9.js";import{S as D}from"./shield-DxnqjELJ.js";import"./index-BdQq_4o_.js";import"./index-1hd4fsLo.js";import"./index-DXgMstpB.js";import"./index-Df15Pdw1.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=Q("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),G=i.object({fullName:i.string().min(1,"Full name is required"),email:i.string().email("Invalid email address"),phone:i.string().optional(),dateOfBirth:i.string().optional(),gender:i.string().optional()}),J=i.object({bloodType:i.string().optional(),allergies:i.string().optional(),chronicConditions:i.string().optional(),emergencyContactName:i.string().optional(),emergencyContactPhone:i.string().optional()});function ne(){const{toast:c}=q(),x=H(),[A,g]=u.useState("personal"),[M]=U();u.useEffect(()=>{const h=new URLSearchParams(window.location.search).get("tab");(h==="emergency"||h==="personal")&&g(h)},[M]);const{data:r,isLoading:V}=K({queryKey:["/api/users/profile"]}),n=j({resolver:S(G),defaultValues:{fullName:"",email:"",phone:"",dateOfBirth:"",gender:""}}),l=j({resolver:S(J),defaultValues:{bloodType:"",allergies:"",chronicConditions:"",emergencyContactName:"",emergencyContactPhone:""}});u.useEffect(()=>{r&&(n.reset({fullName:r.fullName,email:r.email,phone:r.phone||"",dateOfBirth:r.dateOfBirth||"",gender:r.gender||""}),l.reset({bloodType:r.bloodType||"",allergies:r.allergies||"",chronicConditions:r.chronicConditions||"",emergencyContactName:r.emergencyContactName||"",emergencyContactPhone:r.emergencyContactPhone||""}))},[r]);const d=y({mutationFn:s=>R(s),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/users/profile"]}),c({title:"Profile updated",description:"Your profile information has been updated successfully."})},onError:s=>{c({title:"Error",description:`Failed to update profile: ${s.message}`,variant:"destructive"})}}),m=y({mutationFn:s=>z(s),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/users/profile"]}),c({title:"Emergency information updated",description:"Your emergency information has been updated successfully."})},onError:s=>{c({title:"Error",description:`Failed to update emergency information: ${s.message}`,variant:"destructive"})}}),L=s=>{d.mutate(s)},k=s=>{m.mutate(s)};return V?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(p,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"py-6 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Profile Settings"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your personal information and emergency contacts"})]}),e.jsxs(Y,{value:A,onValueChange:g,className:"space-y-6",children:[e.jsxs($,{className:"mb-4",children:[e.jsx(P,{value:"personal",children:"Personal Information"}),e.jsx(P,{value:"emergency",children:"Emergency Information"})]}),e.jsx(E,{value:"personal",children:e.jsxs(f,{children:[e.jsx(v,{children:e.jsx(N,{children:"Personal Information"})}),e.jsx(b,{children:e.jsxs("form",{onSubmit:n.handleSubmit(L),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"fullName",children:"Full Name"}),e.jsx(o,{id:"fullName",placeholder:"Enter your full name",...n.register("fullName")}),n.formState.errors.fullName&&e.jsx("p",{className:"text-sm text-red-500",children:n.formState.errors.fullName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"email",children:"Email"}),e.jsx(o,{id:"email",type:"email",placeholder:"Enter your email",...n.register("email")}),n.formState.errors.email&&e.jsx("p",{className:"text-sm text-red-500",children:n.formState.errors.email.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"phone",children:"Phone Number"}),e.jsx(o,{id:"phone",placeholder:"Enter your phone number",...n.register("phone")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"dateOfBirth",children:"Date of Birth"}),e.jsx(o,{id:"dateOfBirth",type:"date",...n.register("dateOfBirth")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"gender",children:"Gender"}),e.jsxs(T,{value:n.watch("gender"),onValueChange:s=>n.setValue("gender",s),children:[e.jsx(B,{children:e.jsx(w,{placeholder:"Select gender"})}),e.jsxs(I,{children:[e.jsx(a,{value:"Male",children:"Male"}),e.jsx(a,{value:"Female",children:"Female"}),e.jsx(a,{value:"Other",children:"Other"}),e.jsx(a,{value:"Prefer not to say",children:"Prefer not to say"})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(C,{type:"submit",disabled:d.isPending,children:d.isPending?e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})})]})})]})}),e.jsx(E,{value:"emergency",children:e.jsxs(f,{children:[e.jsx(v,{children:e.jsxs(N,{className:"flex items-center",children:[e.jsx(D,{className:"mr-2 h-5 w-5 text-red-500"}),"Emergency Information"]})}),e.jsxs(b,{children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-sm text-red-700",children:"This information will be accessible to emergency responders through your emergency QR code. Make sure it's accurate and up-to-date."})}),e.jsxs("form",{onSubmit:l.handleSubmit(k),className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"bloodType",children:"Blood Type"}),e.jsxs(T,{value:l.watch("bloodType"),onValueChange:s=>l.setValue("bloodType",s),children:[e.jsx(B,{children:e.jsx(w,{placeholder:"Select blood type"})}),e.jsxs(I,{children:[e.jsx(a,{value:"A+",children:"A+"}),e.jsx(a,{value:"A-",children:"A-"}),e.jsx(a,{value:"B+",children:"B+"}),e.jsx(a,{value:"B-",children:"B-"}),e.jsx(a,{value:"AB+",children:"AB+"}),e.jsx(a,{value:"AB-",children:"AB-"}),e.jsx(a,{value:"O+",children:"O+"}),e.jsx(a,{value:"O-",children:"O-"}),e.jsx(a,{value:"Unknown",children:"Unknown"})]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"allergies",children:"Allergies"}),e.jsx(F,{id:"allergies",placeholder:"List any allergies (medications, food, etc.)",...l.register("allergies")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"chronicConditions",children:"Chronic Conditions"}),e.jsx(F,{id:"chronicConditions",placeholder:"List any chronic conditions (diabetes, asthma, etc.)",...l.register("chronicConditions")})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"emergencyContactName",children:"Emergency Contact Name"}),e.jsx(o,{id:"emergencyContactName",placeholder:"Enter emergency contact name",...l.register("emergencyContactName")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"emergencyContactPhone",children:"Emergency Contact Phone"}),e.jsx(o,{id:"emergencyContactPhone",placeholder:"Enter emergency contact phone",...l.register("emergencyContactPhone")})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(C,{type:"submit",disabled:m.isPending,children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Save Emergency Information"]})})})]})]})]})})]})]})}export{ne as default};
