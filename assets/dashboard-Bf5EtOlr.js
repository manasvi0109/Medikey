import{c as F,r as h,j as e,C as j,L as f,B as p,T as _e,u as A,a as b,b as C,d as N,e as U,f as S,A as Ue,g as Ve,h as Oe,i as V,k as pe,l as je,m as ge,I as We,n as $e,o as Be,p as qe,q as ze,s as Ke,P as B,t as Qe,v as Ge,w as Ye,x as D,y as Xe,z as q,D as z,E as K,F as Ze,U as Je}from"./index-B_3hYsFf.js";import{D as es,a as ss,b as as,c as ts}from"./dialog-Dg9bbEd7.js";import{l as rs}from"./index-BSL61_qy.js";import{S as ns,U as le,F as ls}from"./user-plus-Caq7bw2E.js";import{Q as is}from"./qr-code-BTDWwF22.js";import{S as c}from"./skeleton-DoTryf93.js";import{C as ie,S as cs,a as ds,b as os,c as ms,d as T,u as xs,T as ye,e as Ne,f as P,g as L}from"./tabs-DPpCUSf9.js";import{C as O}from"./clock-Dvj09B-n.js";import{P as hs,f as J,C as us}from"./format-DY6R5SYn.js";import{i as ps,a as js,M as gs}from"./isTomorrow-DGITKaiQ.js";import{H as I,R as Q,L as ce,a as G,D as ee,A as ys,b as Ns,S as vs,c as W}from"./AreaChart-B-Z1ogsh.js";import{D as ve,a as fe,E as we,b as be,c as k}from"./dropdown-menu-DdBJkZNW.js";import{R as fs,E as ws,D as bs,F as Cs}from"./RecordViewer-D1nxB-uF.js";import{C as Ss}from"./chevron-right-DS5geTse.js";import{S as ks}from"./send-AllP16Qq.js";import{u as As}from"./index-Df15Pdw1.js";import{S as Ms}from"./shield-DxnqjELJ.js";import"./index-DXgMstpB.js";import"./index-Cg8ng6lj.js";import"./index-BdQq_4o_.js";import"./index-1hd4fsLo.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=F("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=F("CircleDashed",[["path",{d:"M10.1 2.182a10 10 0 0 1 3.8 0",key:"5ilxe3"}],["path",{d:"M13.9 21.818a10 10 0 0 1-3.8 0",key:"11zvb9"}],["path",{d:"M17.609 3.721a10 10 0 0 1 2.69 2.7",key:"1iw5b2"}],["path",{d:"M2.182 13.9a10 10 0 0 1 0-3.8",key:"c0bmvh"}],["path",{d:"M20.279 17.609a10 10 0 0 1-2.7 2.69",key:"1ruxm7"}],["path",{d:"M21.818 10.1a10 10 0 0 1 0 3.8",key:"qkgqxc"}],["path",{d:"M3.721 6.391a10 10 0 0 1 2.7-2.69",key:"1mcia2"}],["path",{d:"M6.391 20.279a10 10 0 0 1-2.69-2.7",key:"1fvljs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=F("Watch",[["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["polyline",{points:"12 10 12 12 13 13",key:"19dquz"}],["path",{d:"m16.13 7.66-.81-4.05a2 2 0 0 0-2-1.61h-2.68a2 2 0 0 0-2 1.61l-.78 4.05",key:"18k57s"}],["path",{d:"m7.88 16.36.8 4a2 2 0 0 0 2 1.61h2.72a2 2 0 0 0 2-1.61l.81-4.05",key:"16ny36"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=F("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=F("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);function Ds({userProfile:s}){const[t,a]=h.useState(!1);return e.jsxs(j,{className:"mb-6 bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Emergency Information"}),e.jsx("span",{className:"bg-primary-100 text-primary-800 text-xs px-2 py-1 rounded-full font-medium",children:"Always Accessible"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Blood Type"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-gray-900",children:(s==null?void 0:s.bloodType)||"Not specified"})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Allergies"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:(s==null?void 0:s.allergies)||"None recorded"})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Chronic Conditions"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:(s==null?void 0:s.chronicConditions)||"None recorded"})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Emergency Contact"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s!=null&&s.emergencyContactName?e.jsxs(e.Fragment,{children:[s.emergencyContactName,e.jsx("br",{}),s.emergencyContactPhone]}):"Not specified"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(f,{href:"/profile?tab=emergency",children:e.jsxs(p,{variant:"outline",className:"mr-3",children:[e.jsx(ns,{className:"mr-2 h-4 w-4 text-gray-500"}),"Update Emergency Info"]})}),e.jsxs(p,{variant:"secondary",onClick:()=>a(!0),children:[e.jsx(is,{className:"mr-2 h-4 w-4 text-white"}),"Show Emergency QR Code"]})]})]}),e.jsx(es,{open:t,onOpenChange:a,children:e.jsxs(ss,{className:"sm:max-w-md",children:[e.jsx(as,{children:e.jsx(ts,{children:"Emergency Access QR Code"})}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsx(rs.QRCodeSVG,{value:`${window.location.origin}/emergency/${(s==null?void 0:s.id)||"user"}`,size:200,level:"H",bgColor:"#FFFFFF",fgColor:"#000000"})}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Scan this code to access critical medical information in case of emergency."}),e.jsxs("div",{className:"flex items-center justify-center bg-red-50 p-3 rounded-md",children:[e.jsx(_e,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("p",{className:"text-xs text-red-600",children:"Only share with emergency healthcare providers."})]})]})]})]})})]})}function Ps({className:s}){const[t,a]=h.useState(!1),{data:r,isLoading:n,error:i}=A({queryKey:["/api/medical-summary"]});return n?e.jsxs(j,{className:s,children:[e.jsxs(b,{className:"border-b border-gray-200",children:[e.jsx(C,{children:"Medical Summary"}),e.jsx(c,{className:"h-4 w-32 mt-1"})]}),e.jsx(N,{className:"p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{className:"h-4 w-full"}),e.jsx(c,{className:"h-4 w-full"}),e.jsx(c,{className:"h-4 w-full"}),e.jsx(c,{className:"h-4 w-3/4"})]})})]}):i?e.jsxs(j,{className:s,children:[e.jsx(b,{className:"border-b border-gray-200",children:e.jsx(C,{children:"Medical Summary"})}),e.jsx(N,{className:"p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-red-500 mb-2",children:"Failed to load medical summary"}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:"Try Again"})]})})]}):e.jsxs(j,{className:s,children:[e.jsxs(b,{className:"px-6 py-5 border-b border-gray-200",children:[e.jsx(C,{className:"text-lg font-medium leading-6 text-gray-900",children:"Medical Summary"}),e.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"AI-generated summary based on your records"})]}),e.jsxs(N,{className:"px-6 py-5",children:[e.jsx("div",{className:"prose prose-sm max-w-none text-gray-700",children:r!=null&&r.summary?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:t?"":"line-clamp-6",dangerouslySetInnerHTML:{__html:r.summary}}),r.summary.length>300&&e.jsxs(p,{variant:"link",className:"p-0 h-auto text-sm text-primary-600 hover:text-primary-800",onClick:()=>a(!t),children:[e.jsx(ie,{className:"mr-1 h-4 w-4"}),t?"Show less":"Read more"]})]}):e.jsx("p",{className:"italic text-gray-500",children:"No medical records available to generate a summary. Upload your medical records to see an AI-generated summary of your health history."})}),e.jsx("div",{className:"mt-4",children:e.jsxs(p,{variant:"link",className:"p-0 h-auto text-sm text-primary-600 hover:text-primary-800",children:[e.jsx(ie,{className:"mr-1 h-4 w-4"}),"View detailed health timeline"]})}),(r==null?void 0:r.lastUpdated)&&e.jsxs("div",{className:"mt-4 flex items-center text-xs text-gray-500",children:[e.jsx(O,{className:"mr-1 h-3 w-3"}),"Last updated: ",new Date(r.lastUpdated).toLocaleString()]})]})]})}function Ls(){const{data:s,isLoading:t,error:a}=A({queryKey:["/api/appointments/upcoming"]}),r=(s==null?void 0:s.slice(0,3))||[];return e.jsxs(j,{children:[e.jsxs(b,{className:"px-6 py-5 border-b border-gray-200",children:[e.jsx(C,{className:"text-lg font-medium leading-6 text-gray-900",children:"Upcoming Appointments"}),e.jsxs("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:["Your next ",r.length||3," scheduled visits"]})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:t?e.jsxs(e.Fragment,{children:[e.jsx(Y,{}),e.jsx(Y,{}),e.jsx(Y,{})]}):a?e.jsxs("div",{className:"px-6 py-4 text-center",children:[e.jsx("p",{className:"text-red-500 mb-2",children:"Failed to load appointments"}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:"Try Again"})]}):r.length>0?r.map(n=>e.jsx(Fs,{appointment:n},n.id)):e.jsxs("div",{className:"px-6 py-8 text-center",children:[e.jsx(U,{className:"mx-auto h-12 w-12 text-gray-400 mb-2"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No upcoming appointments"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Schedule your next appointment with your healthcare provider"})]})}),e.jsx(N,{className:"p-0",children:e.jsx("div",{className:"px-4 py-4 sm:px-6 border-t border-gray-200 bg-gray-50",children:e.jsx(f,{href:"/appointments",children:e.jsxs(p,{variant:"outline",className:"w-full",children:[e.jsx(hs,{className:"mr-2 h-4 w-4 text-gray-500"}),"Schedule New Appointment"]})})})})]})}function Fs({appointment:s}){const t=new Date(s.appointmentDate),a=ps(t)?"Today":js(t)?"Tomorrow":J(t,"MMM d, yyyy");return e.jsxs("div",{className:"px-4 py-4 sm:px-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:S("flex-shrink-0 h-10 w-10 rounded-full flex items-center justify-center",s.appointmentType==="checkup"?"bg-primary-100":s.appointmentType==="test"?"bg-green-100":"bg-blue-100"),children:e.jsx(Hs,{type:s.appointmentType})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.providerName}),e.jsx("div",{className:"text-sm text-gray-500",children:s.title})]}),e.jsxs("div",{className:"ml-2 flex-shrink-0",children:[e.jsx("div",{className:"text-sm text-gray-500",children:a}),e.jsx("div",{className:"text-sm text-gray-500",children:J(t,"h:mm a")})]})]}),s.location&&e.jsxs("div",{className:"mt-2 ml-14 flex items-center text-xs text-gray-500",children:[e.jsx(gs,{className:"mr-1 h-3 w-3"}),e.jsx("span",{children:s.location})]})]})}function Hs({type:s}){switch(s){case"checkup":return e.jsx(U,{className:"h-5 w-5 text-primary-600"});case"test":return e.jsxs("svg",{className:"h-5 w-5 text-green-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M19 2H5C3.89543 2 3 2.89543 3 4V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V4C21 2.89543 20.1046 2 19 2Z"}),e.jsx("path",{d:"M15 2V7L12 5.5L9 7V2"}),e.jsx("line",{x1:"12",y1:"11",x2:"12",y2:"17"}),e.jsx("line",{x1:"9",y1:"14",x2:"15",y2:"14"})]});case"follow_up":return e.jsx(O,{className:"h-5 w-5 text-blue-600"});default:return e.jsx(U,{className:"h-5 w-5 text-gray-600"})}}function Y(){return e.jsx("div",{className:"px-4 py-4 sm:px-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx(c,{className:"h-4 w-24 mb-2"}),e.jsx(c,{className:"h-3 w-32"})]}),e.jsxs("div",{className:"ml-2 flex-shrink-0",children:[e.jsx(c,{className:"h-4 w-16 mb-2"}),e.jsx(c,{className:"h-3 w-12"})]})]})})}function Es(){var i,o,l,m,u,v,y,x,d;const[s,t]=h.useState("3m"),{data:a,isLoading:r,error:n}=A({queryKey:["/api/health-metrics",s]});return e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Health Analytics"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Time Period:"}),e.jsxs(cs,{value:s,onValueChange:t,children:[e.jsx(ds,{className:"w-[180px]",children:e.jsx(os,{placeholder:"Select time range"})}),e.jsxs(ms,{children:[e.jsx(T,{value:"1m",children:"Last Month"}),e.jsx(T,{value:"3m",children:"Last 3 Months"}),e.jsx(T,{value:"6m",children:"Last 6 Months"}),e.jsx(T,{value:"1y",children:"Last Year"}),e.jsx(T,{value:"all",children:"All Time"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsx(X,{title:"Blood Pressure",value:((i=a==null?void 0:a.bloodPressure)==null?void 0:i.latest)||"128/82",change:((o=a==null?void 0:a.bloodPressure)==null?void 0:o.change)||-4,isLoading:r,error:n,icon:e.jsx(I,{className:"h-6 w-6 text-primary-600"}),children:((l=a==null?void 0:a.bloodPressure)==null?void 0:l.data)&&e.jsx(Q,{width:"100%",height:"100%",children:e.jsxs(ce,{data:a.bloodPressure.data,margin:{top:5,right:10,left:0,bottom:5},children:[e.jsx(G,{type:"monotone",dataKey:"systolic",stroke:"#3F83F8",strokeWidth:2,dot:!1}),e.jsx(G,{type:"monotone",dataKey:"diastolic",stroke:"#76A9FA",strokeWidth:2,dot:!1})]})})}),e.jsx(X,{title:"Blood Sugar",value:((m=a==null?void 0:a.bloodSugar)==null?void 0:m.latest)||"105 mg/dL",change:((u=a==null?void 0:a.bloodSugar)==null?void 0:u.change)||-2,isLoading:r,error:n,icon:e.jsx(ee,{className:"h-6 w-6 text-primary-600"}),children:((v=a==null?void 0:a.bloodSugar)==null?void 0:v.data)&&e.jsx(Q,{width:"100%",height:"100%",children:e.jsx(ys,{data:a.bloodSugar.data,margin:{top:5,right:10,left:0,bottom:5},children:e.jsx(Ns,{type:"monotone",dataKey:"value",stroke:"#22C55E",fill:"rgba(34, 197, 94, 0.1)",strokeWidth:2})})})}),e.jsx(X,{title:"Weight / BMI",value:((y=a==null?void 0:a.weight)==null?void 0:y.latest)||"165 lbs / 27.2",change:((x=a==null?void 0:a.weight)==null?void 0:x.change)||-1.3,isLoading:r,error:n,icon:e.jsx(vs,{className:"h-6 w-6 text-primary-600"}),children:((d=a==null?void 0:a.weight)==null?void 0:d.data)&&e.jsx(Q,{width:"100%",height:"100%",children:e.jsx(ce,{data:a.weight.data,margin:{top:5,right:10,left:0,bottom:5},children:e.jsx(G,{type:"monotone",dataKey:"value",stroke:"#9333EA",strokeWidth:2,dot:!1})})})})]})]})}function X({title:s,value:t,change:a,isLoading:r,error:n,icon:i,children:o}){return r?e.jsx(j,{children:e.jsxs(N,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(c,{className:"h-12 w-12 rounded-md"}),e.jsxs("div",{className:"ml-5 w-0 flex-1",children:[e.jsx(c,{className:"h-4 w-24 mb-2"}),e.jsx(c,{className:"h-6 w-32"})]})]}),e.jsx(c,{className:"h-24 w-full rounded-md"})]})}):n?e.jsx(j,{children:e.jsxs(N,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0 bg-gray-100 rounded-md p-3",children:i}),e.jsxs("div",{className:"ml-5 w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 truncate",children:s}),e.jsx("p",{className:"text-sm text-red-500",children:"Failed to load data"})]})]}),e.jsx("div",{className:"h-24 bg-gray-50 rounded-md flex items-center justify-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Data unavailable"})})]})}):e.jsx(j,{children:e.jsxs(N,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-primary-100 rounded-md p-3",children:i}),e.jsxs("div",{className:"ml-5 w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 truncate",children:s}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:t}),a!==void 0&&e.jsxs("div",{className:S("ml-2 flex items-center text-sm font-semibold",a<0?"text-green-600":a>0?"text-red-600":"text-gray-600"),children:[e.jsx("span",{className:S("material-icons text-sm",a<0?"text-green-500":a>0?"text-red-500":"text-gray-500"),children:a<0?"↓":a>0?"↑":"→"}),e.jsxs("span",{children:[Math.abs(a),"%"]})]})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"h-24 bg-gray-50 rounded-md overflow-hidden",children:o})})]})})}function _s(){const[s,t]=h.useState(1),[a,r]=h.useState(null),{data:n,isLoading:i,error:o}=A({queryKey:["/api/records/recent",s]}),l=(n==null?void 0:n.records)||[],m=(n==null?void 0:n.total)||0,u=(n==null?void 0:n.perPage)||3,v=Math.ceil(m/u),y=()=>{t(d=>Math.max(d-1,1))},x=()=>{t(d=>Math.min(d+1,v))};return e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Medical Records"}),e.jsx(f,{href:"/records",children:e.jsx("a",{className:"text-sm font-medium text-primary-600 hover:text-primary-800",children:"View all records"})})]}),e.jsxs(j,{className:"shadow overflow-hidden sm:rounded-md",children:[e.jsx("ul",{className:"divide-y divide-gray-200",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Z,{}),e.jsx(Z,{}),e.jsx(Z,{})]}):o?e.jsxs("li",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-red-500 mb-2",children:"Failed to load medical records"}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:"Try Again"})]}):l.length>0?l.map(d=>e.jsx(Us,{record:d,onViewClick:()=>r(d)},d.id)):e.jsxs("li",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"No medical records found"}),e.jsx(f,{href:"/records",children:e.jsx(p,{children:"Upload your first record"})})]})}),l.length>0&&e.jsxs("div",{className:"px-4 py-4 sm:px-6 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",(s-1)*u+1," to ",Math.min(s*u,m)," of ",m," records"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(p,{variant:"outline",size:"sm",onClick:y,disabled:s<=1,children:[e.jsx(us,{className:"h-4 w-4 text-gray-500 mr-1"}),"Previous"]}),e.jsxs(p,{variant:"outline",size:"sm",onClick:x,disabled:s>=v,children:["Next",e.jsx(Ss,{className:"h-4 w-4 text-gray-500 ml-1"})]})]})]})]}),a&&e.jsx(fs,{record:a,isOpen:!!a,onClose:()=>r(null)})]})}function Us({record:s,onViewClick:t}){return e.jsx("li",{children:e.jsx("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:S("flex-shrink-0 h-10 w-10 rounded-full flex items-center justify-center",s.recordType==="prescription"?"bg-green-100":s.recordType==="lab_report"?"bg-primary-100":s.recordType==="diagnostic_image"?"bg-purple-100":"bg-blue-100"),children:e.jsx(Vs,{type:s.recordType})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.title}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.provider," - ",J(new Date(s.recordDate),"MMM d, yyyy")]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:t,children:e.jsx(ws,{className:"h-4 w-4 text-gray-400 hover:text-gray-500"})}),e.jsx(p,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(bs,{className:"h-4 w-4 text-gray-400 hover:text-gray-500"})}),e.jsxs(ve,{children:[e.jsx(fe,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(we,{className:"h-4 w-4 text-gray-400 hover:text-gray-500"})})}),e.jsxs(be,{align:"end",children:[e.jsx(k,{onClick:t,children:"View details"}),e.jsx(k,{children:"Download"}),e.jsx(k,{children:"Share"}),e.jsx(k,{className:"text-red-600",children:"Delete"})]})]})]})]})})})}function Vs({type:s}){switch(s){case"prescription":return e.jsxs("svg",{className:"h-5 w-5 text-green-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M9 12H15"}),e.jsx("path",{d:"M12 9V15"}),e.jsx("path",{d:"M19 20H5C3.89543 20 3 19.1046 3 18V6C3 4.89543 3.89543 4 5 4H15L21 10V18C21 19.1046 20.1046 20 19 20Z"}),e.jsx("path",{d:"M17 4V10H21"})]});case"lab_report":return e.jsxs("svg",{className:"h-5 w-5 text-primary-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3Z"}),e.jsx("path",{d:"M8 10H16"}),e.jsx("path",{d:"M8 14H12"}),e.jsx("path",{d:"M8 18H16"}),e.jsx("path",{d:"M8 6H16"})]});case"diagnostic_image":return e.jsxs("svg",{className:"h-5 w-5 text-purple-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("path",{d:"M21 15L16 10L5 21"})]});default:return e.jsxs("svg",{className:"h-5 w-5 text-blue-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M14 3V7C14 7.55228 14.4477 8 15 8H19"}),e.jsx("path",{d:"M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H14L19 8V19C19 20.1046 18.1046 21 17 21Z"}),e.jsx("path",{d:"M9 7H10"}),e.jsx("path",{d:"M9 13H15"}),e.jsx("path",{d:"M9 17H15"})]})}}function Z(){return e.jsx("li",{children:e.jsx("div",{className:"px-4 py-4 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"ml-4",children:[e.jsx(c,{className:"h-4 w-36 mb-2"}),e.jsx(c,{className:"h-3 w-48"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{className:"h-8 w-8 rounded-full"}),e.jsx(c,{className:"h-8 w-8 rounded-full"}),e.jsx(c,{className:"h-8 w-8 rounded-full"})]})]})})})}function Os(){const{data:s,isLoading:t,error:a}=A({queryKey:["/api/family-members"]});return e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Family Vault"}),e.jsx(f,{href:"/family",children:e.jsxs(p,{children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Add Member"]})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:t?e.jsxs(e.Fragment,{children:[e.jsx(oe,{}),e.jsx(oe,{})]}):a?e.jsxs(j,{className:"col-span-full p-8 text-center",children:[e.jsx("p",{className:"text-red-500 mb-2",children:"Failed to load family members"}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:"Try Again"})]}):s&&s.length>0?s.slice(0,3).map(r=>e.jsx(Ws,{member:r},r.id)):e.jsxs(j,{className:"col-span-full p-8 text-center",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"No family members added yet"}),e.jsx(f,{href:"/family",children:e.jsxs(p,{children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Add Your First Family Member"]})})]})})]})}function Ws({member:s}){return e.jsxs(j,{className:"overflow-hidden",children:[e.jsxs(N,{className:"p-0",children:[e.jsxs("div",{className:"px-4 py-5 sm:px-6 flex items-center",children:[e.jsxs(Ue,{className:"h-12 w-12",children:[e.jsx(Ve,{src:s.avatarUrl||"",alt:s.name}),e.jsx(Oe,{children:s.name.substring(0,2).toUpperCase()})]}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.relationship,s.dateOfBirth?`, ${$s(s.dateOfBirth)} years`:""]})]}),e.jsxs(ve,{children:[e.jsx(fe,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(we,{className:"h-4 w-4"})})}),e.jsxs(be,{align:"end",children:[e.jsx(k,{children:"View profile"}),e.jsx(k,{children:"Edit details"}),e.jsx(k,{className:"text-red-600",children:"Remove"})]})]})]}),e.jsx("div",{className:"border-t border-gray-200 px-4 py-4 sm:px-6",children:e.jsxs("dl",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Blood Type"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.bloodType||"—"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Allergies"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.allergies||"None"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Chronic Conditions"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.chronicConditions||"None"})]})]})})]}),e.jsx(V,{className:"bg-gray-50 px-4 py-3 border-t border-gray-200",children:e.jsx(f,{href:`/family/${s.id}/records`,children:e.jsxs(p,{variant:"outline",className:"w-full",children:[e.jsx(ls,{className:"mr-2 h-4 w-4 text-gray-500"}),"View Medical Records"]})})})]})}function oe(){return e.jsxs(j,{children:[e.jsxs(N,{className:"p-0",children:[e.jsxs("div",{className:"px-4 py-5 sm:px-6 flex items-center",children:[e.jsx(c,{className:"h-12 w-12 rounded-full"}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx(c,{className:"h-5 w-32 mb-2"}),e.jsx(c,{className:"h-4 w-24"})]}),e.jsx(c,{className:"h-8 w-8 rounded-full"})]}),e.jsx("div",{className:"border-t border-gray-200 px-4 py-4 sm:px-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx(c,{className:"h-3 w-16 mb-1"}),e.jsx(c,{className:"h-4 w-12"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx(c,{className:"h-3 w-16 mb-1"}),e.jsx(c,{className:"h-4 w-20"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(c,{className:"h-3 w-24 mb-1"}),e.jsx(c,{className:"h-4 w-32"})]})]})})]}),e.jsx(V,{className:"bg-gray-50 px-4 py-3 border-t border-gray-200",children:e.jsx(c,{className:"h-9 w-full"})})]})}function $s(s){const t=new Date,a=new Date(s);let r=t.getFullYear()-a.getFullYear();const n=t.getMonth()-a.getMonth();return(n<0||n===0&&t.getDate()<a.getDate())&&r--,r}function Bs(){const[s,t]=h.useState(""),{toast:a}=pe(),r=je({mutationFn:i=>Be("POST","/api/ai-chat",{message:i}),onSuccess:()=>{t(""),a({title:"Message sent",description:"Check the AI Assistant page for the full conversation."})},onError:i=>{a({title:"Error",description:`Failed to send message: ${i.message}`,variant:"destructive"})}}),n=i=>{i.preventDefault(),s.trim()&&r.mutate(s)};return e.jsx(j,{className:"mt-6 bg-primary-50 rounded-lg shadow overflow-hidden",children:e.jsxs(N,{className:"px-4 py-5 sm:p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center",children:e.jsx(ge,{className:"h-6 w-6 text-primary-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI Health Assistant"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ask questions about your health records or get information about medical terms"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[e.jsxs("form",{onSubmit:n,className:"flex items-center",children:[e.jsx(We,{placeholder:"Ask a question about your health...",value:s,onChange:i=>t(i.target.value),className:"flex-grow",disabled:r.isPending}),e.jsxs(p,{className:"ml-3",type:"submit",disabled:!s.trim()||r.isPending,children:[r.isPending?e.jsx($e,{className:"h-4 w-4 animate-spin mr-1"}):e.jsx(ks,{className:"h-4 w-4 mr-1"}),"Ask"]})]}),e.jsx("div",{className:"mt-3 text-xs text-gray-500",children:'Example questions: "What does my last blood test show?", "What are normal cholesterol levels?"'})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(f,{href:"/assistant",children:e.jsx(p,{variant:"link",className:"text-primary-600 hover:text-primary-800 text-sm",children:"Go to AI Assistant for full conversation"})})})]})})}var te="Switch",[qs,La]=qe(te),[zs,Ks]=qs(te),Ce=h.forwardRef((s,t)=>{const{__scopeSwitch:a,name:r,checked:n,defaultChecked:i,required:o,disabled:l,value:m="on",onCheckedChange:u,form:v,...y}=s,[x,d]=h.useState(null),g=ze(t,_=>d(_)),R=h.useRef(!1),H=x?v||!!x.closest("form"):!0,[E=!1,He]=Ke({prop:n,defaultProp:i,onChange:u});return e.jsxs(zs,{scope:a,checked:E,disabled:l,children:[e.jsx(B.button,{type:"button",role:"switch","aria-checked":E,"aria-required":o,"data-state":Ae(E),"data-disabled":l?"":void 0,disabled:l,value:m,...y,ref:g,onClick:Qe(s.onClick,_=>{He(Ee=>!Ee),H&&(R.current=_.isPropagationStopped(),R.current||_.stopPropagation())})}),H&&e.jsx(Qs,{control:x,bubbles:!R.current,name:r,value:m,checked:E,required:o,disabled:l,form:v,style:{transform:"translateX(-100%)"}})]})});Ce.displayName=te;var Se="SwitchThumb",ke=h.forwardRef((s,t)=>{const{__scopeSwitch:a,...r}=s,n=Ks(Se,a);return e.jsx(B.span,{"data-state":Ae(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:t})});ke.displayName=Se;var Qs=s=>{const{control:t,checked:a,bubbles:r=!0,...n}=s,i=h.useRef(null),o=xs(a),l=As(t);return h.useEffect(()=>{const m=i.current,u=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==a&&y){const x=new Event("click",{bubbles:r});y.call(m,a),m.dispatchEvent(x)}},[o,a,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...n,tabIndex:-1,ref:i,style:{...s.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ae(s){return s?"checked":"unchecked"}var Me=Ce,Gs=ke;const ae=h.forwardRef(({className:s,...t},a)=>e.jsx(Me,{className:S("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:a,children:e.jsx(Gs,{className:S("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ae.displayName=Me.displayName;const Ys=Ge("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function M({className:s,variant:t,...a}){return e.jsx("div",{className:S(Ys({variant:t}),s),...a})}var Ie=(s=>(s.APPLE_WATCH="apple_watch",s.FITBIT="fitbit",s.SAMSUNG_GALAXY_WATCH="samsung_galaxy_watch",s.GARMIN="garmin",s.GENERIC="generic",s))(Ie||{});const me=(s,t)=>`${window.location.origin}/api/smartwatch?userId=${s}&deviceType=${t}`,xe={apple_watch:e.jsx(Is,{className:"h-6 w-6"}),fitbit:e.jsx(W,{className:"h-6 w-6"}),samsung_galaxy_watch:e.jsx(se,{className:"h-6 w-6"}),garmin:e.jsx(Ts,{className:"h-6 w-6"}),generic:e.jsx(I,{className:"h-6 w-6"})},Xs=({userId:s})=>{const{toast:t}=pe(),[a,r]=h.useState("connected"),n=Ye(),{data:i,isLoading:o,error:l}=A({queryKey:["/api/smartwatch/connected-devices"],refetchInterval:1e4}),m=je({mutationFn:({deviceId:x,command:d,data:g})=>Xe(x,d,g),onSuccess:()=>{t({title:"Command sent successfully",description:"The command has been sent to your smartwatch."}),n.invalidateQueries({queryKey:["/api/smartwatch/connected-devices"]})},onError:x=>{t({title:"Failed to send command",description:x.message,variant:"destructive"})}}),u=(x,d,g={})=>{m.mutate({deviceId:x,command:d,data:g})},v=()=>e.jsxs("div",{children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Object.values(Ie).map(x=>e.jsxs(j,{className:"flex flex-col",children:[e.jsxs(b,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[xe[x],x.split("_").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" ")]}),e.jsxs(D,{children:["Connect your ",x.split("_").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" ")," device"]})]}),e.jsxs(N,{className:"flex-1",children:[e.jsx("p",{className:"text-sm",children:"Use this connection URL in your smartwatch app:"}),e.jsx("div",{className:"mt-2 p-2 bg-secondary rounded text-xs font-mono break-all",children:me(s,x)})]}),e.jsx(V,{children:e.jsx(p,{variant:"outline",className:"w-full",onClick:()=>{navigator.clipboard.writeText(me(s,x)),t({title:"URL copied to clipboard",description:"You can now paste this URL in your smartwatch app."})},children:"Copy URL"})})]},x))}),e.jsxs(q,{className:"mt-6",children:[e.jsx(z,{children:"How to connect your smartwatch"}),e.jsx(K,{children:e.jsxs("ol",{className:"ml-6 list-decimal",children:[e.jsx("li",{children:"Install the MediKey companion app on your smartwatch"}),e.jsx("li",{children:'Open the app and select "Connect to MediKey"'}),e.jsx("li",{children:"Enter the URL provided above or scan the QR code"}),e.jsx("li",{children:"Authorize the connection on your smartwatch"}),e.jsx("li",{children:"Your health data will now sync automatically"})]})})]})]}),y=()=>{if(o)return e.jsx("div",{className:"py-8 text-center",children:"Loading connected devices..."});if(l)return e.jsxs(q,{variant:"destructive",className:"my-4",children:[e.jsx(z,{children:"Error"}),e.jsx(K,{children:"Failed to load connected devices. Please try again."})]});const x=(i==null?void 0:i.connectedDevices)||[];return x.length===0?e.jsxs(q,{className:"my-4",children:[e.jsx(z,{children:"No devices connected"}),e.jsx(K,{children:`You don't have any smartwatches connected. Go to the "Connect Device" tab to set up a new connection.`})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:x.map(d=>e.jsxs(j,{className:"flex flex-col",children:[e.jsxs(b,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(C,{className:"flex items-center gap-2",children:[xe[d.deviceType],d.deviceType.split("_").map(g=>g.charAt(0).toUpperCase()+g.slice(1)).join(" ")]}),e.jsx(M,{variant:"outline",className:"ml-2",children:new Date(d.lastSeen).toLocaleTimeString()})]}),e.jsxs(D,{children:["Device ID: ",d.deviceId]})]}),e.jsxs(N,{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Real-time monitoring"}),e.jsx(ae,{checked:!0,onCheckedChange:g=>{u(d.deviceId,"set_monitoring",{enabled:g})}})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Alerts enabled"}),e.jsx(ae,{checked:!0,onCheckedChange:g=>{u(d.deviceId,"set_alerts",{enabled:g})}})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Currently monitoring:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(M,{variant:"secondary",children:"Heart Rate"}),e.jsx(M,{variant:"secondary",children:"Blood Pressure"}),e.jsx(M,{variant:"secondary",children:"Blood Oxygen"}),e.jsx(M,{variant:"secondary",children:"Activity"})]})]})]}),e.jsxs(V,{className:"flex justify-between",children:[e.jsx(p,{variant:"outline",size:"sm",onClick:()=>{u(d.deviceId,"refresh",{})},children:"Refresh Data"}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>{u(d.deviceId,"disconnect",{})},children:"Disconnect"})]})]},d.deviceId))})};return e.jsxs(j,{className:"w-full",children:[e.jsxs(b,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5"}),"SmartWatch Integration"]}),e.jsx(D,{children:"Connect your smartwatch to monitor real-time health metrics"})]}),e.jsx(N,{children:e.jsxs(ye,{defaultValue:"connected",value:a,onValueChange:r,children:[e.jsxs(Ne,{className:"mb-4",children:[e.jsx(P,{value:"connected",children:"Connected Devices"}),e.jsx(P,{value:"connect",children:"Connect New Device"})]}),e.jsx(L,{value:"connected",children:y()}),e.jsx(L,{value:"connect",children:v()})]})})]})};function Zs(s,t=[]){let a=[];function r(i,o){const l=h.createContext(o),m=a.length;a=[...a,o];function u(y){const{scope:x,children:d,...g}=y,R=(x==null?void 0:x[s][m])||l,H=h.useMemo(()=>g,Object.values(g));return e.jsx(R.Provider,{value:H,children:d})}function v(y,x){const d=(x==null?void 0:x[s][m])||l,g=h.useContext(d);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${y}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,v]}const n=()=>{const i=a.map(o=>h.createContext(o));return function(l){const m=(l==null?void 0:l[s])||i;return h.useMemo(()=>({[`__scope${s}`]:{...l,[s]:m}}),[l,m])}};return n.scopeName=s,[r,Js(n,...t)]}function Js(...s){const t=s[0];if(s.length===1)return t;const a=()=>{const r=s.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(i){const o=r.reduce((l,{useScope:m,scopeName:u})=>{const y=m(i)[`__scope${u}`];return{...l,...y}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return a.scopeName=t.scopeName,a}var re="Progress",ne=100,[ea,Fa]=Zs(re),[sa,aa]=ea(re),Re=h.forwardRef((s,t)=>{const{__scopeProgress:a,value:r=null,max:n,getValueLabel:i=ta,...o}=s;(n||n===0)&&!he(n)&&console.error(ra(`${n}`,"Progress"));const l=he(n)?n:ne;r!==null&&!ue(r,l)&&console.error(na(`${r}`,"Progress"));const m=ue(r,l)?r:null,u=$(m)?i(m,l):void 0;return e.jsx(sa,{scope:a,value:m,max:l,children:e.jsx(B.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":$(m)?m:void 0,"aria-valuetext":u,role:"progressbar","data-state":Pe(m,l),"data-value":m??void 0,"data-max":l,...o,ref:t})})});Re.displayName=re;var Te="ProgressIndicator",De=h.forwardRef((s,t)=>{const{__scopeProgress:a,...r}=s,n=aa(Te,a);return e.jsx(B.div,{"data-state":Pe(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...r,ref:t})});De.displayName=Te;function ta(s,t){return`${Math.round(s/t*100)}%`}function Pe(s,t){return s==null?"indeterminate":s===t?"complete":"loading"}function $(s){return typeof s=="number"}function he(s){return $(s)&&!isNaN(s)&&s>0}function ue(s,t){return $(s)&&!isNaN(s)&&s<=t&&s>=0}function ra(s,t){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${ne}\`.`}function na(s,t){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${ne} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Le=Re,la=De;const Fe=h.forwardRef(({className:s,value:t,...a},r)=>e.jsx(Le,{ref:r,className:S("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...a,children:e.jsx(la,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Fe.displayName=Le.displayName;const ia=s=>{try{const a=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/api/smartwatch`,r=new WebSocket(a);return r.onopen=()=>{console.log("WebSocket connection established")},r.onmessage=n=>{try{const i=JSON.parse(n.data);s(i)}catch(i){console.error("Error parsing WebSocket message:",i)}},r.onerror=n=>{console.error("WebSocket error:",n)},r.onclose=()=>{console.log("WebSocket connection closed")},r}catch(t){return console.error("Failed to setup WebSocket:",t),null}},ca={heartRate:{value:72,timestamp:new Date().toISOString(),trend:"stable",range:{min:60,max:100},status:"normal"},bloodPressure:{value:"120/80",timestamp:new Date().toISOString(),trend:"down",status:"normal"},bloodOxygen:{value:98,timestamp:new Date().toISOString(),trend:"stable",range:{min:95,max:100},status:"normal"},steps:{value:6542,timestamp:new Date().toISOString(),trend:"up",range:{min:0,max:1e4},status:"normal"},sleep:{value:"7h 23m",timestamp:new Date(Date.now()-8*60*60*1e3).toISOString(),trend:"up",status:"normal"},temperature:{value:98.6,timestamp:new Date().toISOString(),trend:"stable",range:{min:97,max:99},status:"normal"}},da=s=>{switch(s){case"normal":return"text-green-500";case"warning":return"text-amber-500";case"alert":return"text-red-500";default:return"text-green-500"}},oa=s=>{switch(s){case"up":return e.jsx("span",{className:"text-green-500",children:"↑"});case"down":return e.jsx("span",{className:"text-red-500",children:"↓"});case"stable":return e.jsx("span",{className:"text-gray-500",children:"→"});default:return null}},w=({title:s,value:t,status:a,trend:r,icon:n,range:i,lastUpdated:o})=>{const l=a?da(a):"",m=r?oa(r):null,u=i&&typeof t=="number"?Math.round((t-i.min)/(i.max-i.min)*100):void 0;return e.jsxs(j,{children:[e.jsxs(b,{className:"pb-2",children:[e.jsxs(C,{className:"text-base flex items-center gap-2",children:[n,s,m&&e.jsx("span",{className:"ml-1",children:m})]}),e.jsxs(D,{className:"text-xs",children:["Last updated: ",new Date(o).toLocaleTimeString()]})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{className:`text-2xl font-bold ${l}`,children:[t,typeof t=="number"&&e.jsxs("span",{className:"text-sm font-normal ml-1",children:[s==="Heart Rate"&&"bpm",s==="Blood Oxygen"&&"%",s==="Temperature"&&"°F"]})]}),a&&e.jsx(M,{variant:a==="normal"?"outline":a==="warning"?"secondary":"destructive",children:a})]}),u!==void 0&&e.jsx(Fe,{value:u,className:"h-2 mt-2"})]})]})},ma=()=>{const[s,t]=h.useState(ca),[a,r]=h.useState("all"),[n,i]=h.useState(!1);return h.useEffect(()=>{const o=ia(l=>{l.type==="metric"&&t(m=>({...m,[l.metricType]:{value:l.value,timestamp:l.timestamp,trend:l.trend||"stable",status:l.status||"normal",range:l.range}}))});return i(!!o),()=>{o&&o.close()}},[]),h.useEffect(()=>{if(!n){const o=setInterval(()=>{t(l=>({...l,heartRate:{...l.heartRate,value:Math.floor(Math.random()*20)+65,timestamp:new Date().toISOString()}}))},5e3);return()=>clearInterval(o)}},[n]),e.jsxs(j,{className:"w-full",children:[e.jsxs(b,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"Live Health Metrics"]}),e.jsxs(D,{children:["Real-time health metrics from your connected smartwatch",!n&&" (Demo data)"]})]}),e.jsx(N,{children:e.jsxs(ye,{defaultValue:"all",value:a,onValueChange:r,children:[e.jsxs(Ne,{className:"mb-4",children:[e.jsx(P,{value:"all",children:"All Metrics"}),e.jsx(P,{value:"heart",children:"Cardiac"}),e.jsx(P,{value:"activity",children:"Activity"})]}),e.jsx(L,{value:"all",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsx(w,{title:"Heart Rate",value:s.heartRate.value,status:s.heartRate.status,trend:s.heartRate.trend,icon:e.jsx(I,{className:"h-4 w-4"}),range:s.heartRate.range,lastUpdated:s.heartRate.timestamp}),e.jsx(w,{title:"Blood Pressure",value:s.bloodPressure.value,status:s.bloodPressure.status,trend:s.bloodPressure.trend,icon:e.jsx(W,{className:"h-4 w-4"}),lastUpdated:s.bloodPressure.timestamp}),e.jsx(w,{title:"Blood Oxygen",value:s.bloodOxygen.value,status:s.bloodOxygen.status,trend:s.bloodOxygen.trend,icon:e.jsx(ee,{className:"h-4 w-4"}),range:s.bloodOxygen.range,lastUpdated:s.bloodOxygen.timestamp}),e.jsx(w,{title:"Steps",value:s.steps.value,status:s.steps.status,trend:s.steps.trend,icon:e.jsx(se,{className:"h-4 w-4"}),range:s.steps.range,lastUpdated:s.steps.timestamp}),e.jsx(w,{title:"Sleep",value:s.sleep.value,status:s.sleep.status,trend:s.sleep.trend,icon:e.jsx(O,{className:"h-4 w-4"}),lastUpdated:s.sleep.timestamp}),e.jsx(w,{title:"Temperature",value:s.temperature.value,status:s.temperature.status,trend:s.temperature.trend,icon:e.jsx(de,{className:"h-4 w-4"}),range:s.temperature.range,lastUpdated:s.temperature.timestamp})]})}),e.jsx(L,{value:"heart",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsx(w,{title:"Heart Rate",value:s.heartRate.value,status:s.heartRate.status,trend:s.heartRate.trend,icon:e.jsx(I,{className:"h-4 w-4"}),range:s.heartRate.range,lastUpdated:s.heartRate.timestamp}),e.jsx(w,{title:"Blood Pressure",value:s.bloodPressure.value,status:s.bloodPressure.status,trend:s.bloodPressure.trend,icon:e.jsx(W,{className:"h-4 w-4"}),lastUpdated:s.bloodPressure.timestamp}),e.jsx(w,{title:"Blood Oxygen",value:s.bloodOxygen.value,status:s.bloodOxygen.status,trend:s.bloodOxygen.trend,icon:e.jsx(ee,{className:"h-4 w-4"}),range:s.bloodOxygen.range,lastUpdated:s.bloodOxygen.timestamp})]})}),e.jsx(L,{value:"activity",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsx(w,{title:"Steps",value:s.steps.value,status:s.steps.status,trend:s.steps.trend,icon:e.jsx(se,{className:"h-4 w-4"}),range:s.steps.range,lastUpdated:s.steps.timestamp}),e.jsx(w,{title:"Sleep",value:s.sleep.value,status:s.sleep.status,trend:s.sleep.trend,icon:e.jsx(O,{className:"h-4 w-4"}),lastUpdated:s.sleep.timestamp}),e.jsx(w,{title:"Temperature",value:s.temperature.value,status:s.temperature.status,trend:s.temperature.trend,icon:e.jsx(de,{className:"h-4 w-4"}),range:s.temperature.range,lastUpdated:s.temperature.timestamp})]})})]})})]})};function Ha(){const{user:s}=Ze(),{data:t,isLoading:a}=A({queryKey:["/api/users/profile"]});return a?e.jsx(xa,{}):e.jsxs("div",{className:"py-6 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Health Dashboard"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Welcome back, ",(t==null?void 0:t.fullName)||(s==null?void 0:s.username),". Here's your health overview."]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[e.jsx(f,{href:"/emergency",children:e.jsxs("a",{className:"bg-white rounded-lg shadow-sm p-4 flex flex-col items-center text-center hover:shadow-md transition-shadow hover:bg-primary-50",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center mb-3",children:e.jsx(Ms,{className:"h-6 w-6 text-primary-600"})}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Emergency Access"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Critical health info"})]})}),e.jsx(f,{href:"/records",children:e.jsxs("a",{className:"bg-white rounded-lg shadow-sm p-4 flex flex-col items-center text-center hover:shadow-md transition-shadow hover:bg-primary-50",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center mb-3",children:e.jsx(Cs,{className:"h-6 w-6 text-primary-600"})}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Medical Records"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"View & manage records"})]})}),e.jsx(f,{href:"/appointments",children:e.jsxs("a",{className:"bg-white rounded-lg shadow-sm p-4 flex flex-col items-center text-center hover:shadow-md transition-shadow hover:bg-primary-50",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center mb-3",children:e.jsx(U,{className:"h-6 w-6 text-primary-600"})}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Appointments"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Schedule & track visits"})]})}),e.jsx(f,{href:"/analytics",children:e.jsxs("a",{className:"bg-white rounded-lg shadow-sm p-4 flex flex-col items-center text-center hover:shadow-md transition-shadow hover:bg-primary-50",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center mb-3",children:e.jsx(I,{className:"h-6 w-6 text-primary-600"})}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Health Analytics"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Track your metrics"})]})}),e.jsx(f,{href:"/family",children:e.jsxs("a",{className:"bg-white rounded-lg shadow-sm p-4 flex flex-col items-center text-center hover:shadow-md transition-shadow hover:bg-primary-50",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center mb-3",children:e.jsx(Je,{className:"h-6 w-6 text-primary-600"})}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Family Vault"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Manage dependents"})]})}),e.jsx(f,{href:"/assistant",children:e.jsxs("a",{className:"bg-white rounded-lg shadow-sm p-4 flex flex-col items-center text-center hover:shadow-md transition-shadow hover:bg-primary-50",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center mb-3",children:e.jsx(ge,{className:"h-6 w-6 text-primary-600"})}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"AI Assistant"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Get health answers"})]})})]}),e.jsx(Ds,{userProfile:t}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx(Ps,{className:"lg:col-span-2"}),e.jsx(Ls,{})]}),e.jsx(Es,{}),e.jsx(_s,{}),e.jsx(Os,{}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-xl font-medium mb-4 flex items-center gap-2",children:[e.jsx(Rs,{className:"h-5 w-5"}),"Smartwatch Integration"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsx(ma,{}),e.jsx(Xs,{userId:(s==null?void 0:s.id)||0})]})]}),e.jsx(Bs,{})]})}function xa(){return e.jsxs("div",{className:"py-6 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(c,{className:"h-8 w-64 mb-2"}),e.jsx(c,{className:"h-4 w-48"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[...Array(6)].map((s,t)=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(c,{className:"h-12 w-12 rounded-full mb-3"}),e.jsx(c,{className:"h-4 w-24 mb-2"}),e.jsx(c,{className:"h-3 w-16"})]})},t))}),e.jsx(c,{className:"h-48 w-full mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3 mb-6",children:[e.jsx(c,{className:"h-80 lg:col-span-2"}),e.jsx(c,{className:"h-80"})]}),e.jsx(c,{className:"h-64 w-full mb-6"}),e.jsx(c,{className:"h-80 w-full mb-6"}),e.jsx(c,{className:"h-64 w-full mb-6"}),e.jsx(c,{className:"h-40 w-full"})]})}export{Ha as default};
