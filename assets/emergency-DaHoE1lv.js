import{F as g,r as b,u as i,j as e,T as r,C as n,a as m,b as x,d as o,B as y,a5 as f}from"./index-zgffJ4ce.js";import{S as c}from"./skeleton-Cjg6cfqo.js";import{D as u,a as v,b as w,c as C}from"./dialog-Bd7EBT8B.js";import{S as k,l as h,Q}from"./index-BM10jMMD.js";import{C as S}from"./clock-lpJI9UBH.js";import"./index-SjyDGVV-.js";import"./index-DVJqLa1D.js";function L(){const{user:a}=g(),[j,l]=b.useState(!1),{data:t,isLoading:N}=i({queryKey:["/api/emergency/qr-code"],queryFn:f}),{data:s,isLoading:p}=i({queryKey:["/api/users/profile"]}),d=N||p;return e.jsxs("div",{className:"container mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Emergency Access"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Critical health information for emergency situations"})]})}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-start",children:[e.jsx(r,{className:"h-5 w-5 text-red-500 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Important Information"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:"This page provides access to your critical medical information for emergency situations. Share the QR code only with emergency healthcare providers."})]})]}),e.jsxs(n,{className:"mb-6 bg-white rounded-lg shadow overflow-hidden",children:[e.jsx(m,{className:"bg-red-50 border-b border-red-100",children:e.jsxs(x,{className:"text-lg font-medium text-red-800 flex items-center",children:[e.jsx(k,{className:"h-5 w-5 mr-2 text-red-600"}),"Emergency Access QR Code"]})}),e.jsx(o,{className:"p-6",children:d?e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx(c,{className:"h-48 w-48 rounded-md"}),e.jsx(c,{className:"h-4 w-64"}),e.jsx(c,{className:"h-4 w-48"})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-sm",children:e.jsx(h.QRCodeSVG,{value:(t==null?void 0:t.url)||`https://medikey.app/emergency/${(a==null?void 0:a.id)||"user"}`,size:200,level:"H"})}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Scan this code to access critical medical information in case of emergency."}),e.jsxs("div",{className:"flex items-center justify-center bg-red-50 p-3 rounded-md",children:[e.jsx(S,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("p",{className:"text-xs text-red-600",children:"This QR code expires in 24 hours for security."})]}),e.jsxs(y,{className:"mt-4",variant:"outline",onClick:()=>l(!0),children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"View Full Screen"]})]})]})})]}),e.jsxs(n,{className:"mb-6 bg-white rounded-lg shadow overflow-hidden",children:[e.jsx(m,{className:"bg-red-50 border-b border-red-100",children:e.jsxs(x,{className:"text-lg font-medium text-red-800 flex items-center",children:[e.jsx(r,{className:"h-5 w-5 mr-2 text-red-600"}),"Critical Medical Information"]})}),e.jsx(o,{className:"p-6",children:d?e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{className:"h-8 w-full"}),e.jsx(c,{className:"h-24 w-full"}),e.jsx(c,{className:"h-24 w-full"})]}):e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider mb-2",children:"Personal Information"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-xs text-gray-500 block",children:"Full Name"}),e.jsx("span",{className:"text-base font-medium",children:s==null?void 0:s.fullName})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-xs text-gray-500 block",children:"Date of Birth"}),e.jsx("span",{className:"text-base",children:(s==null?void 0:s.dateOfBirth)||"Not specified"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-xs text-gray-500 block",children:"Gender"}),e.jsx("span",{className:"text-base",children:(s==null?void 0:s.gender)||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block",children:"Blood Type"}),e.jsx("span",{className:"text-lg font-semibold text-red-600",children:(s==null?void 0:s.bloodType)||"Not specified"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider mb-2",children:"Medical Information"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-xs text-gray-500 block",children:"Allergies"}),e.jsx("span",{className:"text-base",children:(s==null?void 0:s.allergies)||"None recorded"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-xs text-gray-500 block",children:"Chronic Conditions"}),e.jsx("span",{className:"text-base",children:(s==null?void 0:s.chronicConditions)||"None recorded"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block",children:"Emergency Contact"}),s!=null&&s.emergencyContactName?e.jsxs("div",{children:[e.jsx("span",{className:"text-base",children:s.emergencyContactName}),e.jsx("br",{}),e.jsx("span",{className:"text-base",children:s.emergencyContactPhone})]}):e.jsx("span",{className:"text-base",children:"Not specified"})]})]})]})]})})]}),e.jsx(u,{open:j,onOpenChange:l,children:e.jsxs(v,{className:"sm:max-w-md",children:[e.jsx(w,{children:e.jsx(C,{children:"Emergency Access QR Code"})}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg",children:e.jsx(h.QRCodeSVG,{value:(t==null?void 0:t.url)||`https://medikey.app/emergency/${(a==null?void 0:a.id)||"user"}`,size:300,level:"H"})}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Scan this code to access critical medical information in case of emergency."}),e.jsxs("div",{className:"flex items-center justify-center bg-red-50 p-3 rounded-md",children:[e.jsx(r,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("p",{className:"text-xs text-red-600",children:"Only share with emergency healthcare providers."})]})]})]})]})})]})}export{L as default};
